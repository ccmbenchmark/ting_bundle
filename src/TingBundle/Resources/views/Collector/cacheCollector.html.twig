{% extends '@WebProfiler/Profiler/layout.html.twig' %}
{% block toolbar %}
    {% set icon %}
    <img width="20" height="28" alt="Cache" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAACTpAAAk6QFQJOf4AAAAB3RJTUUH3gsVCTErkceEPgAAAqJJREFUSMftlT1oFEEUx9983N5m5u425BISiXBICJpGyBmRNGKhlbFTRIMgSEiljYX2KqawEC2DoIWkEgXt7ARRiKSxOEJSGM/EQHJsdmfnbm93dp+NF4IfyQVtIv6rB/Pmx5s3j/8D+K9/X2S7s1KpVCwUCocopQ+TJJkjhNyr1WpfVlZW1G6AtFQqnXQc56wQ4jjn/CDnHAAAoigCRJz1ff+N7/vPq9Xq222Bg4ODN2zbnnAcZ4Axtu3T4jhG3/crYRjeX1xcnN4EDg0NHRNCTFBKL2WzWYtzDojYXr8IAWMMhGFYB4AnQRA8psaYZWNMWUq5KxgAACIC5xyklCKKoiNJknymjLFbhJCL8/PzJ3zfnzPG6HagiAjGGOV53vtKpTJCKb3MGLtLyuVyUwhhJUnyznXdZ2EYLnV3d+8HgDsdHR2CMbZZNSEE4jiGMAzXGWPXV1dXfSHEga6urnOU0tF6vR5xRGxyzi3G2GhfX9+o1rqplHrVaDQGMpnMZKFQuJrL5YoAgK7rftJa347j+IWUcrq3t/e0lDKLiEAIAURskuHhYd9xnPzWKhARwjCEKIqeNhqNGWPMQWNMVUq5blnWpGVZ523b3sxt3fM8T/Ff9QYAwLZtsG173Lbtca31YUIICiE+Wpb1U+5W8Z2azxgDSqnVincSb3c82hX92+awB4CI6KZp+segNE0BEV2qlBrzPG9Ka63TNAVCSPtmSgikaQpa67rneVNKqbEf7eumlPJaZ2fnvtbPJkkCSqkRAIB8Pv+hNTqEENjY2PiqtX6wsLAw9VuDzeVy+Z6enjPFYvEC5/xUJpPJBkFw9PvZbBzHTWPM61qtNrO2tvYyCALV1grI5/NWf39/iXN+xRjzCACgFS8vLy8ppaK9ufW+AQhETOxlVFxvAAAAAElFTkSuQmCC" />
    <span class="sf-toolbar-status{% if 50 < collector.cacheOperationsCount %} sf-toolbar-status-yellow{% endif %}">{{ collector.cacheOperationsCount }}</span>
    {% if collector.cacheOperationsCount > 0 %}
        <span class="sf-toolbar-info-piece-additional-detail">in {{ '%0.2f'|format(collector.cacheTotalTime) }} ms</span>
    {% endif %}
    {% endset %}
    {% set text %}
    <div class="sf-toolbar-info-piece">
        <b>Operations</b>
        <span>{{ collector.cacheOperationsCount }}</span>
    </div>
    <div class="sf-toolbar-info-piece">
        <b>Operations time</b>
        <span>{{ '%0.2f'|format(collector.cacheTotalTime) }} ms</span>
    </div>
    <div class="sf-toolbar-info-piece">
        <b>Miss / Hits</b>
        <span>{{ collector.miss }} / {{ collector.hits }}</span>
    </div>
    <div class="sf-toolbar-info-piece">
        <b>Hit ratio</b>
        <span>
            {% if (collector.miss == 0) %}
                (100%)
            {% else %}
                ({{ '%0.2f'|format( (collector.hits/(collector.hits + collector.miss))*100 ) }}%)
            {% endif %}
        </span>
    </div>
    {% endset %}
    {% include '@WebProfiler/Profiler/toolbar_item.html.twig' with { 'link': profiler_url } %}
{% endblock %}

{% block menu %}
    <span class="label">
    <span class="icon"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAACTpAAAk6QFQJOf4AAAAB3RJTUUH3gsVCTErkceEPgAAAqJJREFUSMftlT1oFEEUx9983N5m5u425BISiXBICJpGyBmRNGKhlbFTRIMgSEiljYX2KqawEC2DoIWkEgXt7ARRiKSxOEJSGM/EQHJsdmfnbm93dp+NF4IfyQVtIv6rB/Pmx5s3j/8D+K9/X2S7s1KpVCwUCocopQ+TJJkjhNyr1WpfVlZW1G6AtFQqnXQc56wQ4jjn/CDnHAAAoigCRJz1ff+N7/vPq9Xq222Bg4ODN2zbnnAcZ4Axtu3T4jhG3/crYRjeX1xcnN4EDg0NHRNCTFBKL2WzWYtzDojYXr8IAWMMhGFYB4AnQRA8psaYZWNMWUq5KxgAACIC5xyklCKKoiNJknymjLFbhJCL8/PzJ3zfnzPG6HagiAjGGOV53vtKpTJCKb3MGLtLyuVyUwhhJUnyznXdZ2EYLnV3d+8HgDsdHR2CMbZZNSEE4jiGMAzXGWPXV1dXfSHEga6urnOU0tF6vR5xRGxyzi3G2GhfX9+o1rqplHrVaDQGMpnMZKFQuJrL5YoAgK7rftJa347j+IWUcrq3t/e0lDKLiEAIAURskuHhYd9xnPzWKhARwjCEKIqeNhqNGWPMQWNMVUq5blnWpGVZ523b3sxt3fM8T/Ff9QYAwLZtsG173Lbtca31YUIICiE+Wpb1U+5W8Z2azxgDSqnVincSb3c82hX92+awB4CI6KZp+segNE0BEV2qlBrzPG9Ka63TNAVCSPtmSgikaQpa67rneVNKqbEf7eumlPJaZ2fnvtbPJkkCSqkRAIB8Pv+hNTqEENjY2PiqtX6wsLAw9VuDzeVy+Z6enjPFYvEC5/xUJpPJBkFw9PvZbBzHTWPM61qtNrO2tvYyCALV1grI5/NWf39/iXN+xRjzCACgFS8vLy8ppaK9ufW+AQhETOxlVFxvAAAAAElFTkSuQmCC" alt="" /></span>
    <strong>Ting Cache</strong>
    <span class="count">
        <span>{{ collector.cacheOperationsCount }}</span>
        <span>{{ '%0.0f'|format(collector.cacheTotalTime) }} ms</span>
    </span>
</span>
{% endblock %}

{% block panel %}
    <h2>Operations</h2>

    {% if collector.operations is empty %}
        <p>
            <em>No operation.</em>
        </p>
    {% else %}
        <ul class="alt">
            {% for i, operation in collector.operations %}
                <li class="{{ cycle(['odd', 'even'], i) }}">
                    <p class="ting_infos">
                        <span class="ting-label">
                            <span>{{ operation.type }}</span> {{ operation.keys|join(', ') }}
                            {% if operation['miss'] is defined and operation['miss'] %}<span class="red_label">MISS</span>{% endif %}
                            <span>{{ operation['time'] }} ms</span>
                        </span>
                    </p>
                </li>
            {% endfor %}
        </ul>
    {% endif %}
    <style>
        h3 {
            margin-bottom: 0px;
        }

        #content #main p.ting_infos{
            padding-bottom: 0;
        }

        #content #main ul li{
            padding-bottom: 10px;
        }

        span.ting-label span{
            display: inline-block;
            background-color: #aacd4e;
            border-radius: 6px;
            padding: 4px;
            margin-right: 2px;
            font-size: 11px;
        }
        span.ting-label span.red_label{
            background-color:#ffaaaa;
        }
    </style>
{% endblock %}
